apiVersion: core.oam.dev/v1beta1
kind: Application
metadata:
  name: kafka-mirror-maker2-sample
spec:
  components:
    - type: kafka-mirror-maker2
      name: kafka-mirror-maker2
      properties:
        version: 3.3.2
        replicas: 1
        connectCluster: kafka-cluster-target
        clusters:
          - alias: kafka-cluster
            bootstrapServers: 'kafka-cluster-kafka-bootstrap:9092'
          - alias: kafka-cluster-target
            bootstrapServers: 'kafka-cluster-target-kafka-bootstrap:9092'
            config:
              config.storage.replication.factor: -1
              offset.storage.replication.factor: -1
              status.storage.replication.factor: -1
        mirrors:
          - sourceCluster: kafka-cluster
            targetCluster: kafka-cluster-target
            sourceConnector:
              config:
                replication.factor: 1
                offset-syncs.topic.replication.factor: 1
                sync.topic.acls.enabled: 'false'
            heartbeatConnector:
              config:
                heartbeats.topic.replication.factor: 1
            checkpointConnector:
              config:
                checkpoints.topic.replication.factor: 1
            topicsPattern: .*
            groupsPattern: .*
